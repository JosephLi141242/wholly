/**
* @version 2.0.0
* @link https://github.com/gajus/wholly for the canonical source repository
* @license https://github.com/gajus/wholly/blob/master/LICENSE BSD 3-Clause
*/
!function(e){"use strict";var t=!0,n=[],a={};a.calcTableMaxCellLength=function(t){var n=0;return t.find("tr").each(function(){var t=a.calcRowCellLength(e(this));t>n&&(n=t)}),n},a.calcRowCellLength=function(t){var n=0;return t.find("td, th").each(function(){var t=parseInt(e(this).attr("colspan"),10)||1;n+=t}),n},a.generateTableMatrix=function(e){var n=a.calcTableMaxCellLength(e),l=e.find("tr").length;return t&&console.log("generateTableMatrix","width:",n,"height:",l),a.generateMatrix(n,l)},a.generateMatrix=function(e,t){for(var n=[];t--;)n.push(new Array(e));return n},a.indexTable=function(n){var l=a.generateTableMatrix(n),o=n.find("tr");return e.each(l,function(n){var a=o.eq(n),r=a.children(),i=0;t&&console.groupCollapsed("Table row.","y:",n,"columns.length:",r.length),e.each(l[n],function(e){var a,o,c,s,h=l[n][e];if(h)t&&console.log("x:",i,"cell:",h[0],"state: already indexed");else{for(h=r.eq(i++),a=parseInt(h.attr("colspan"),10)||1,o=parseInt(h.attr("rowspan"),10)||1,t&&(a>1||o>1?console.group("x:",e,"colspan:",a,"rowspan:",o,"cell:",h[0]):console.log("x:",e,"colspan:",a,"rowspan:",o,"cell:",h[0])),c=0;o>c;c++)for(s=0;a>s;s++)t&&console.log("relative row:",c,"relative cell:",s,"absolute row:",n+c,"absolute cell:",e+s),l[n+c][e+s]=h[0];(a>1||o>1)&&console.groupEnd()}h.data&&void 0===h.data("wholly.offsetInMatrix")&&h.data("wholly.offsetInMatrix",[e,n])}),t&&console.groupEnd()}),l},e.fn.wholly=function(){this.each(function(){var l,o,r,i;if(-1!=e.inArray(this,n))return void(t&&console.warn("Wholly has been applied twice on the same table."));if(n.push(this),l=e(this),!l.is("table"))throw new Error("Wholly works only with tables.");o=a.indexTable(l),console.log("tableIndex",o),l.on("mouseenter","td, th",function(){var t=e(this),n=parseInt(t.attr("colspan"),10)||1,a=parseInt(t.attr("rowspan"),10)||1,l=t.data("wholly.offsetInMatrix");r=e(),i=e(),e.each(o,function(e,t){r=r.add(t.slice(l[0],l[0]+n))}),e.each(o.slice(l[1],l[1]+a),function(e,t){i=i.add(t)}),r.trigger("wholly.mouseenter-vertical"),i.trigger("wholly.mouseenter-horizontal")}),l.on("mouseleave","td, th",function(){r.trigger("wholly.mouseleave-vertical"),i.trigger("wholly.mouseleave-horizontal")})})}}(jQuery);